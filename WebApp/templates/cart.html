<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/stylesheet.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='modal.css') }}"> <!-- Modal CSS -->
    <title>Cart</title>
</head>
<body>
    <header>
        <div class="headerback">
            <a href = "/" ><img class="Logo" src="../static/images/Logo.png" alt="Logo"></a>
            <a href="/" class="menu">
                <img class="back" src="../static/images/arrow-back.jpg" alt="home">
            </a>
        </div>
    </header>
    <main>
        <div class="cart-icon-container">
            <img src="../static/images/cartn.png" alt="Cart Icon" class="cart-icon">
        </div>
        <div id="itemList">
            {% for item in items %}
                <div class="cart-items" data-item-id="{{ item.id }}">
                    <img src="{{ item.imageURL }}" alt="{{ item.name }} image" class="item-image">
                    <div class="item-details">
                        <h3>{{ item.name }}</h3>
                        <button class="modify-btn">Modify</button>
                        <button id="remove-btn" onclick="removeItem('{{ item.id }}')">Remove</button>
                    </div>
                    <div class="item-quantity">
                        <button class="quantity-btn" onclick="increaseQuantity('{{ item.id }}')">+</button>
                        <span class="quantity" id="quantity-{{ item.id }}">{{ item.quantity or 1 }}</span>
                        <button class="quantity-btn" onclick="decreaseQuantity('{{ item.id }}')">-</button>
                    </div>
                    <div class="item-price">
                        €<span id="price-{{ item.id }}">{{ item.price * (item.quantity or 1) }}</span>
                    </div>
                </div>              
            {% endfor %}
        </div>
        <button class="order-now-btn" onclick="openModal()">Order Now</button>
    </main>
    <!-- Order Confirmation Modal -->
    <div id="orderModal" class="modal">
        <div class="modal-content">
            <p>Once you "confirm" your order, it will be sent to the kitchen.</p>
            <p>Total Cost: €<span id="totalCost">{{ total_price }}</span></p> <!-- Display total cost here -->
            <p>Are you sure?</p>
            <div class="modal-buttons">
                <button id="backButton" class="modal-button red">Back</button>
                <button id="confirmButton" class="modal-button green">Confirm</button>
            </div>
        </div>
    </div>
    <!-- Scripts -->
    <script>
        // Define makeOrderUrl only once globally
        const makeOrderUrl = "{{ url_for('make_order') }}";
    </script>
    <script src="{{ url_for('static', filename='cart.js') }}"></script> <!-- Main cart JS -->
    <script src="{{ url_for('static', filename='modal.js') }}"></script> <!-- Modal JS -->
    <script id="cartData" type="application/json">
        {{ cart_data | tojson }}
    </script>
    
    <footer id="footreddd">
    </footer>
</body>
</html>
